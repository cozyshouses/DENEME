<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cozy's Houses - İlçe Seçimi</title>
    <style>
        /* Basit CSS */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .card {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .card h4 {
            margin: 0;
        }
        #results {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Cozy's Houses</h1>
    <div>
        <h3>Detayları Gör</h3>
        <label for="district-select">İlçe Seçiniz:</label>
        <select id="district-select">
            <option value="">Bir ilçe seçin</option>
            <option value="Konak">Konak</option>
            <option value="Karşıyaka">Karşıyaka</option>
            <option value="Bornova">Bornova</option>
            <option value="Buca">Buca</option>
            <option value="Çeşme">Çeşme</option>
            <option value="Narlıdere">Narlıdere</option>
            <option value="Urla">Urla</option>
        </select>
        <button onclick="showDistrictDetails()">Detayları Gör</button>
    </div>
    <div id="results"></div>

    <script>
        function showDistrictDetails() {
            const districtSelect = document.getElementById("district-select");
            const selectedDistrict = districtSelect.value;

            if (!selectedDistrict) {
                alert("Lütfen bir ilçe seçiniz!");
                return;
            }

            fetch("./data/deneme1.json") // JSON dosyasını okuyacak
                .then((response) => response.json())
                .then((data) => {
                    const filteredData = data.filter(
                        (item) => item.ilce.toLowerCase() === selectedDistrict.toLowerCase()
                    );

                    const resultsContainer = document.getElementById("results");
                    resultsContainer.innerHTML = ""; // Eski sonuçları temizle

                    if (filteredData.length === 0) {
                        resultsContainer.innerHTML = `<p>${selectedDistrict} ilçesinde ev bulunamadı.</p>`;
                    } else {
                        filteredData.forEach((item) => {
                            resultsContainer.innerHTML += `
                                <div class="card">
                                    <h4>${item.evIsmi}</h4>
                                    <p>Fiyat: ${item.fiyat}</p>
                                    <p>Adres: ${item.adres}</p>
                                    <a href="${item.url}" target="_blank">Detaylar</a>
                                </div>
                            `;
                        });
                    }
                })
                .catch((error) => console.error("Veri alınırken hata oluştu:", error));
        }
    </script>
</body>
</html>
